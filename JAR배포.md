```
배포 (deploy)

yaml port번호 8080 임. 변경가능
spring boot는 내장 톰캣을 가지고 있음.
=> *** 스프링 부트에서 배포하는 방법 2가지
    1) WAR
    2) JAR
스프링 부트만 내장톰캣을 가지고 있어서 JAR파일로 배포가 가능하다
    스프링과 이고브는 불가능

EC2
    스프링, 이고브
        자바, 톰캣 설치함
        WAR 파일을 톰캣 안에 넣어줌(톰캣이 있어야 스프링 실행이 가능하다)
        WAR : web application

    스프링부트
        JAR : 톰캣도 같이 압축된 파일
        JAR를 EC2에 넣으면 톰캣 설치 없이 실행 가능하다
        JAR는 하나의 프로그램을 압축시킨 것
        JAR : java application
```
```
배포방법
    spring : war만 가능
    spring boot : war, jar
    egov : war만 가능

스프링 부트 : 톰캣이 내장돼 있다 (톰캣이 있어야 실행할 수 있음)
    배포 방법이 총 3가지
        1. jar : 톰캣 설치 필요
        2. war(내장톰캣 제거) : 톰캣 설치 필요
        3. war(내장톰캣 포함)
```
```
배포하기 전에 
    1. yaml에 db주소 확인하기
    2. 포트번호 확인 (배포할 서버에 이미 사용중인 포트번호를 피해야 한다)
```
```
포트번호 수정해서 JAR로 배포할 것임
    yaml파일에서 포트번호 9090으로 수정
    bootJar로 JAR파일 생성

    WAR파일은 이름을 ROOT라고 설정해야 했음
        WAR는 파일이름이 다를 경우 접속 경로를 추가해야 한다. ex) 파일 이름을 A.war로 하면 localhost:8080/A.war로 접속해야 함.
    JAR파일은 파일이름이 상관없다.

    1. xshell 접속
    2. su - 로 root 접속
    3. ls 로 snap 확인
    4. cd /home 후 ls로 이전에 설치했던 톰캣과 우분투 확인
    5. cd ubuntu 후 ls로 파일 없는 것 확인
    6. pwd 로 /home/ubuntu 경로 확인
    7. ctrl+alt+f 로 JAR 파일 건내줌
    8. ls 로 jar파일 들어온 것 확인
    9. nohup java -jar 파일명.jar & 로 실행하고 엔터 한 번 더 눌러서 ignoring input and appending output to 'nohup.out' 출력시킴
        nohup : 컴퓨터가 꺼지기 전까지 계속 실행(리눅스 명령어)
    10. ls 로 jar 파일과 nohup.out 파일 확인
    11. netstat -tnlp 로  jar에 설정했던 포트번호 뜨는지 확인(여기선 9090)
    12. aws ec2 페이지에서 보안그룹 - 인바운드/아웃바운드에 9090 추가
        0.0.0.0/0 = 모든 ip 허용
    13. ec2 ip:9090/주소 로 연결 확인

오류) 스프링부트의 디폴트가 타임리프이기 때문에 jsp를 찾지 못해서 화면이 안 나옴!!
    해결법) WAR파일로 압축할 때 톰캣을 강제로 포함시키는 방법

    1. 9090 서비스를 죽여야 함
        netstat -tnlp로 9090 서비스 실행 확인. PID를 따로 적어 둠.
        kill -9 PID번호 로 9090 서비스 끝냄
    2. 9090 서비스를 실행시켰던 파일 제거
        ls로 jar와 nohup.out 파일 확인 후, rm -rf * 로 모두 제거
            (-rf : 강제 실행)
    3. 이클립스에서 톰캣 있는 상태로 WAR 파일 생성
    4. 위의 파일 넣는 과정 동일하게 수행
        nohup java -jar 파일명.jar & 에서 파일 확장자만 war로 수정하고 실행
```
```
스프링부트 템플릿 엔진은 타임리프가 디폴트!!
우리는 대전에서 타임리프를 사용하는 곳이 적어서 JSP로 사용했음
스프링부트 + JSP로 사용 시 JAR 압축하면 JSP 인식 못 함
그래서 WAR로 압축해서 실행했음

yaml에 파일 경로 설정해 준 것(mvc: ~로 jsp 경로 설정)도 JSP를 사용했기 때문에 경로를 설정한 것임. 스프링부트에서 타임리프를 사용하면 경로를 지정해주지 않아도 인식한다.
```