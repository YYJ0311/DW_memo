## 1교시
복습  
오늘 선생님 호스트번호 39  

1. 급여가 1500 ~ 2850 사이의 범위에 속하지 않는 모든 사원의 이름 및 급여를 표시하라.  
```sql
select   
ename,  
sal  
from emp  
where SAL < 1500  
or   
SAL > 2850
```

2. 1981년 2월 20일 ~ 1981년 5월 1일에 입사한 사원의 이름, 직위 및 입사일을 표시하라.  
 (입사을 기준으로 오름차순 정렬할 것!)  
```sql
select   
ENAME,  
JOB,  
HIREDATE   
from emp  
where   
HIREDATE >= "1981-02-20"  
and   
HIREDATE <= "1981-05-01"  
order by HIREDATE   <====== order by 3 라고 써도 됨. select한 것 중 3번째 있는 hiredate를 의미
```

3. 부서가 10, 30에 속하는 사원 중 급여가 1500을 넘는 사원의 이름 및 급여를 표시하라.  
```sql
select   
ENAME,  
SAL   
from emp  
where   
DEPTNO = 10  
or   
DEPTNO = 30  
having   
SAL > 1500  
```

4. 1982년에 입사한 모든 사원의 이름과 입사일을 표시하라.  
```sql
select  
ENAME,  
HIREDATE   
from emp  
where   
HIREDATE > "1981-12-31"  
and   
HIREDATE < "1983-01-01"  
```
선생님 답
```sql
where   
    hiredate >= DATE_FORMAT(820101,'%Y-%m-%d')   
    and   
    hiredate < DATE_FORMAT(830101,'%Y-%m-%d')  
```

5. 직위가 CLREK, ANALYST 이면서 급여가 1000, 3000, 5000가 아닌 모든 사원의 이름, 직위 및 급여를 표시하라.  
```sql
select  
ENAME,  
JOB,  
SAL
from emp
where
JOB = 'clerk'
or
JOB = 'analyst'
and
SAL != 1000
and
SAL != 3000
and
SAL != 5000
```
## 2교시
복습  

sum, avg, min, max는 where절이 아니라 having과 같이 위치해야 한다.  
where 뒤에 오면 오류남  

연산자는 where 절에 온다!  
관계 연산자 : !=, =, >, <, >=, <=, is, is not  
논리 연산자 : and, or  
문자 연산자 : like  

## 3교시
코드테스트가 있는 회사에 먼저 지원해 보자  

테이블 보는 순서(컴퓨터 실행 순서와 같음)  
1. from (항상 처음)
2. where
3. group by
4. having
5. select
6. order by (항상 마지막)

- 다중행 함수  
group by, sum, avg, min, mas, count  

- ifnull  
데이터가 null인 행에 임의 데이터를 넣는다.  
데이터를 업데이트하는 게 아님!   
ifnull은 mysql에서만 사용한다. 데이터베이스마다 다르니, 오라클이나 다른 것들은 추가로 찾아보기  
```sql
select
 ifnull(comm, 100)
from emp
```
- ***** date_format  <===== 정말 많이 쓴다!!!!!!
데이터베이스마다 다름! ㅠㅠ  
날짜 함수  
```sql
select
 date_format(hiredate, '%y-%m')
from emp
```
## 4교시
y, m 같은 기호는 구글에 mysql date_format 검색해서 알아보기  
```sql
Q. 연도별로 입사한 사람 수를 구하시오!  
select
date_format(HIREDATE, '%y'), 
count(*) 
from emp
group by date_format(HIREDATE, '%y')
order by 1 ;
```

- AND, OR
where 조건에 동시에 사용할 때가 있음.  
실행순서 : AND 먼저! 그 다음 OR  
```sql
select
 ename,
 sal
from emp
where 
 deptno = 10
 or
 deptno = 30
 and
 sal > 1500
```
이렇게 하면 and 먼저 실행돼서 deptno가 20인 사람도 조회될 수 있다.  
따라서 순서를 바꾸려면 다음과 같이 괄호를 추가해준다.  
```sql
select
 ename,
 sal
from emp
where 
 (
 deptno = 10
 or
 deptno = 30
 )
 and
 sal > 1500
```
```sql
Q. 커미션이 null인 사람을 조회
select 
ENAME 
from emp 
where comm is null 
``` 
## 5교시
- 고급쿼리  
join, subquerty ...  

- join을 알기 전에 알아야 하는 개념  
Foreign Key (FK)  

join : 두 개 이상의 테이블을 조회할 때 사용.  
단, 조회하고자 하는 테이블들이 관계가 있어야 함!  
교집합인 테이블을 찾을 때 사용한다.  
관계형 DB의 특징  

테이블 properties에 ddl탭을 보면 FOREIGN KEY가 입력돼 있는 걸 볼 수 있다.  

from emp e = from emp as e <==== as가 디폴트로 존재  

```sql
join 방법 1
select
ENAME 
from emp e, dept d 
where e.DEPTNO = d.DEPTNO 
emp테이블에 있는 deptno와 dept 테이블에 있는 deptno중 같은 값인 것들의 사원명을 불러옴
```
```sql
join 방법 2
select 
ename
from emp e
join dept d
on e.deptno = d.deptno
```
```sql
join 방법 3
select 
ename
from emp e
inner join dept d <====== inner가 디폴트 값이라서 안 써도 됨
on e.deptno = d.deptno
```
방법 1을 권장하지 않음. 그 이유는 추가 조건이 있을 때 where절이 계속 길어지고, 방법 2에서는 where을 따로 빼서 적을 수 있기 때문. 기능이 다른 것은 구분해서 적어주자!  

여러개의 테이블을 조회할 때는 앞에 테이블의 이름이 들어가야 한다.  
```sql
select
e. ename
from emp e 
join dept d 
on e.DEPTNO = d.DEPTNO 
where d.DEPTNO = 40
d.deptno에는 부서번호 40 데이터가 있지만, e.deptno에는 없으므로 출력되지 않는다.  
```
## 6교시
1. 사원명, 부서번호, 부서이름, 부서 근무지를 조회  
```sql
select 
e.ename,
e.DEPTNO,
d.dname,
d.loc
from emp as e 
inner join dept as d 
on e.DEPTNO = d.DEPTNO
```

2. 부서별 급여합계와 부서이름을 조회  
```sql
select 
sum(e.SAL),
d.dname
from emp as e 
inner join dept as d 
on e.DEPTNO = d.DEPTNO 
group by dname
```

3. 부서 근무지가 NEW YORK이고, 직책이 MANAGER인 사원의 이름과 급여를 조회  
```sql
select 
e.ename,
e.SAL
from emp as e 
inner join dept as d 
on e.DEPTNO = d.DEPTNO 
where d.loc = 'new york'
and e.job = 'manager'
```

4. 1983년 이후 입사한 사원의 보너스가 null이면 100 주고, 사원의 이름과 부서이름, 직업을 조회  
```sql
select 
ifnull(COMM,100),
e.ename,
d.dname,
e.job
from emp as e 
inner join dept as d 
on e.DEPTNO = d.DEPTNO 
where e.HIREDATE >= date_format(830101,'%y-%m-%d') 
```

======> 각 컬럼들 앞에 별칭을 꼭 써주자!!! (ex d.loc)  
======> join 앞에도 inner같은 별칭을 꼭 붙이자!!  
======> 디폴트 값은 되도록 표시해주는게 좋다.  
======> 나중에 컬럼이 많아졌을 때 컬럼이름이 겹치면 에러가 나옴!!  

## 7교시
복습